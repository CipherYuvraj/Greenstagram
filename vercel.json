{
  "version": 2,
  "monorepo": true,
  "projects": [
    {
      "name": "greenstagram-frontend",
      "source": "frontend",
      "framework": "vite",
      "buildCommand": "npm run build",
      "outputDirectory": "build",
      "installCommand": "npm install",
      "devCommand": "npm run dev",
      "nodeVersion": "18.x",
      "env": {
        "VITE_API_URL": "@api_url",
        "VITE_APP_ENV": "@app_env"
      }
    },
    {
      "name": "greenstagram-backend", 
      "source": "backend",
      "runtime": "nodejs18.x",
      "buildCommand": "npm run build",
      "installCommand": "npm install",
      "startCommand": "npm start",
      "functions": {
        "backend/dist/**/*.js": {
          "runtime": "nodejs18.x",
          "memory": 1024,
          "maxDuration": 30
        }
      },
      "env": {
        "NODE_ENV": "@node_env",
        "MONGODB_URI": "@mongodb_uri",
        "JWT_SECRET": "@jwt_secret",
        "AZURE_CLIENT_ID": "@azure_client_id",
        "AZURE_CLIENT_SECRET": "@azure_client_secret",
        "AZURE_TENANT_ID": "@azure_tenant_id",
        "REDIS_URL": "@redis_url"
      }
    }
  ],
  "build": {
    "env": {
      "NODE_VERSION": "18"
    }
  },
  "regions": ["iad1", "sfo1"]
}